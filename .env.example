# NEXUS Cloudflare Pages - Environment Variables
# Copy this file to .dev.vars for local development

# ============================================
# Authentication
# ============================================
NEXUS_API_KEY=your-nexus-api-key-here
ADMIN_API_KEY=your-admin-api-key-here

# ============================================
# Cloudflare API (for deployment)
# ============================================
CLOUDFLARE_API_TOKEN=your-cloudflare-token-here

# ============================================
# GitHub Integration
# ============================================
GITHUB_TOKEN=your-github-token-here
GITHUB_REPO=your-org/your-repo

# ============================================
# LLM Providers (Multi-Gateway)
# ============================================

# Primary Provider (Anthropic Claude Sonnet 4.5 - Recommended)
LLM_PRIMARY_PROVIDER=anthropic
ANTHROPIC_API_KEY=your-anthropic-key-here
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# Fallback Providers (comma-separated: gemini,openai,zai)
LLM_FALLBACK_PROVIDERS=gemini,openai

# Google Gemini
GEMINI_API_KEY=your-gemini-key-here
GEMINI_MODEL=gemini-3-flash-preview

# OpenAI
OPENAI_API_KEY=your-openai-key-here
OPENAI_MODEL=gpt-4

# OpenRouter (Multi-Model Router)
OPENROUTER_API_KEY=your-openrouter-key-here

# ZAI (GLM-4.7)
ZAI_API_KEY=your-zai-key-here
ZAI_MODEL=glm-4.7

# LLM Configuration
LLM_REQUIRED=true
LLM_REQUEST_TIMEOUT_S=60
LLM_MAX_RETRIES=2

# ============================================
# Circuit Breaker (Provider Health)
# ============================================
BREAKER_WINDOW_SECONDS=300
BREAKER_FAIL_THRESHOLD=5
BREAKER_COOLDOWN_SECONDS=120

# ============================================
# FinOps (Cost Management)
# ============================================
LLM_BUDGET_DAILY_USD=20
LLM_BUDGET_SOFT_PCT=0.8
LLM_BUDGET_HARD_PCT=1.0
LLM_AUDIT_ENABLED=true

# ============================================
# YouTube Integration (Optional)
# ============================================
YOUTUBE_API_KEY=your-youtube-key-here
YOUTUBE_DEFAULT_REGION=KR
YOUTUBE_DEFAULT_LANGUAGE=ko

# ============================================
# RAG Auto-Ingest (Optional)
# ============================================
RAG_AUTO_INGEST_ENABLED=false
RAG_AUTO_INGEST_HOUR=3
RAG_AUTO_INGEST_MINUTE=0
RAG_AUTO_INGEST_MAX_FILES=5000
RAG_AUTO_INGEST_MAX_FILE_MB=50

# ============================================
# SSE Stream Configuration
# ============================================
STREAM_EVENT_KEEP=2000
STREAM_WORKLOG_KEEP=200

# ============================================
# DLQ Auto Triage Policy
# ============================================
AUTO_REQUEUE_FAILURE_CODES=PROVIDER_TIMEOUT,PROVIDER_UPSTREAM_ERROR,PROVIDER_RATE_LIMIT
AUTO_HOLD_FAILURE_CODES=SCHEMA_PARSE_ERROR,SCHEMA_VALIDATION_ERROR,SCHEMA_REPAIR_FAILED
AUTO_ALARM_FAILURE_CODES=PROVIDER_AUTH_ERROR,PROVIDER_DISABLED

# ============================================
# Alerts & Notifications (Optional)
# ============================================
ALERT_WEBHOOK_URL=your-webhook-url-here
SLACK_WEBHOOK_URL=your-slack-webhook-here
TEAMS_WEBHOOK_URL=your-teams-webhook-here

# ============================================
# Task Management
# ============================================
TASK_TTL_SECONDS=604800
TASK_LOCK_TTL_SECONDS=900
MAX_RETRIES=3

# ============================================
# Cloudflare Services (when using)
# ============================================
# D1 Database binding name: DB
# KV Namespace binding name: KV
# R2 Bucket binding name: R2

# ============================================
# Multi-Tenant Context
# ============================================
# Default values for x-org-id and x-project-id headers
DEFAULT_ORG_ID=default
DEFAULT_PROJECT_ID=nexus

# ============================================
# Feature Flags
# ============================================
ENABLE_APPROVALS=true
ENABLE_YOUTUBE=false
ENABLE_RAG=false

# ============================================
# Security
# ============================================
CALLBACK_SIGNATURE_SECRET=your-callback-secret-here
ALERT_DEDUPE_TTL_SECONDS=900

# ============================================
# Notes
# ============================================
# - Never commit this file with actual keys
# - Use wrangler secrets for production deployment
# - Local development: copy to .dev.vars
# - Production: use "wrangler pages secret put KEY_NAME"
