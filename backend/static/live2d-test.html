<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live2D í•˜ë£¨ ëª¨ë¸ í…ŒìŠ¤íŠ¸ - NEXUS-ON</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .container {
            text-align: center;
            max-width: 900px;
            padding: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        #live2d-canvas {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .controls {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .info {
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .info p {
            margin: 0.5rem 0;
            font-size: 0.95rem;
        }
        
        .status {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .loading {
            font-size: 1.5rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ­ Live2D í•˜ë£¨ ëª¨ë¸ í…ŒìŠ¤íŠ¸</h1>
        <p class="subtitle">NEXUS-ON ì„¸ë¦¬ì•„ AI ìºë¦­í„° ì‹œìŠ¤í…œ</p>
        
        <canvas id="live2d-canvas" width="800" height="600"></canvas>
        
        <div class="controls">
            <button onclick="playMotion(0)">ğŸŒŸ Idle</button>
            <button onclick="playMotion(1)">ğŸ‘‹ ì¸ì‚¬</button>
            <button onclick="playMotion(2)">ğŸ˜Š ë¯¸ì†Œ</button>
            <button onclick="playMotion(3)">ğŸ’­ ìƒê°</button>
            <button onclick="playMotion(4)">ğŸ¤ ë§í•˜ê¸°</button>
            <button onclick="playRandomMotion()">ğŸ² ëœë¤</button>
        </div>
        
        <div class="info">
            <p><strong>ëª¨ë¸ ì •ë³´</strong></p>
            <p>ì´ë¦„: Haru Greeter Pro</p>
            <p>ì• ë‹ˆë©”ì´ì…˜: 26ê°œ</p>
            <p>ë¦½ì‹±í¬: âœ… ì§€ì› (ParamMouthOpenY)</p>
            <p>ëˆˆ ê¹œë¹¡ì„: âœ… ìë™ (ParamEyeLOpen, ParamEyeROpen)</p>
            
            <div class="status" id="status">
                <span class="loading">â³ Live2D ë¡œë”© ì¤‘...</span>
            </div>
        </div>
    </div>

    <!-- PIXI.js -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
    
    <!-- Live2D Cubism Core -->
    <script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
    
    <!-- pixi-live2d-display -->
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.5.0/dist/index.min.js"></script>
    
    <script>
        let app;
        let model;
        
        // Live2D ì´ˆê¸°í™”
        async function initLive2D() {
            try {
                updateStatus('ğŸ”§ PIXI.js ì´ˆê¸°í™” ì¤‘...');
                
                // PIXI Application ìƒì„±
                app = new PIXI.Application({
                    view: document.getElementById('live2d-canvas'),
                    width: 800,
                    height: 600,
                    backgroundColor: 0x000000,
                    backgroundAlpha: 0,
                    antialias: true
                });
                
                updateStatus('ğŸ“¦ Live2D ëª¨ë¸ ë¡œë”© ì¤‘...');
                
                // Live2D ëª¨ë¸ ë¡œë“œ
                model = await PIXI.live2d.Live2DModel.from('/live2d/haru_greeter_t05.model3.json', {
                    autoInteract: true,  // ìë™ ìƒí˜¸ì‘ìš©
                    autoHitTest: true    // ìë™ íˆíŠ¸ í…ŒìŠ¤íŠ¸
                });
                
                updateStatus('âœ… ëª¨ë¸ ë¡œë“œ ì™„ë£Œ!');
                
                // ëª¨ë¸ ìŠ¤ì¼€ì¼ ë° ìœ„ì¹˜ ì¡°ì •
                const scale = Math.min(
                    app.screen.width / model.width,
                    app.screen.height / model.height
                ) * 0.8;
                
                model.scale.set(scale);
                model.x = app.screen.width / 2;
                model.y = app.screen.height / 2;
                model.anchor.set(0.5, 0.5);
                
                // ìŠ¤í…Œì´ì§€ì— ì¶”ê°€
                app.stage.addChild(model);
                
                updateStatus(`ğŸ‰ ì¤€ë¹„ ì™„ë£Œ! (ì• ë‹ˆë©”ì´ì…˜: ${model.internalModel.motionManager.definitions.length}ê°œ)`);
                
                // ìë™ ëˆˆ ê¹œë¹¡ì„ í™œì„±í™”
                if (model.internalModel.eyeBlink) {
                    updateStatus('ğŸ‘ï¸ ìë™ ëˆˆ ê¹œë¹¡ì„ í™œì„±í™”ë¨');
                }
                
                // Idle ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
                playMotion(0);
                
            } catch (error) {
                updateStatus(`âŒ ì˜¤ë¥˜: ${error.message}`);
                console.error('Live2D ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }
        
        // ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
        function playMotion(index) {
            if (!model) {
                updateStatus('âŒ ëª¨ë¸ì´ ë¡œë“œë˜ì§€ ì•ŠìŒ');
                return;
            }
            
            try {
                model.motion(index, 0, PIXI.live2d.MotionPriority.NORMAL);
                updateStatus(`â–¶ï¸ ì• ë‹ˆë©”ì´ì…˜ ${index} ì¬ìƒ ì¤‘...`);
            } catch (error) {
                updateStatus(`âŒ ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        // ëœë¤ ì• ë‹ˆë©”ì´ì…˜
        function playRandomMotion() {
            if (!model) return;
            const maxIndex = model.internalModel.motionManager.definitions.length - 1;
            const randomIndex = Math.floor(Math.random() * maxIndex);
            playMotion(randomIndex);
        }
        
        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
            console.log('[Live2D]', message);
        }
        
        // ì´ˆê¸°í™” ì‹œì‘
        window.addEventListener('DOMContentLoaded', () => {
            initLive2D();
        });
    </script>
</body>
</html>
