# ========================================
# NEXUS v7.7 Environment Configuration
# ========================================

# ---- Authentication ----
NEXUS_API_KEY=dev-api-key-change-in-production
ADMIN_API_KEY=admin-key-change-in-production

# ---- Redis (State Storage) ----
REDIS_URL=redis://redis:6379/0
TASK_TTL_SECONDS=604800

# ---- RabbitMQ (Message Queue) ----
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
TASK_QUEUE=nexus.tasks
RETRY_QUEUE_PREFIX=nexus.retry
DLQ_QUEUE=nexus.dlq
MAX_RETRIES=3
HOLD_QUEUE=nexus.hold
ALARM_QUEUE=nexus.alarm

# ---- LLM Configuration ----
# Provider: anthropic|gemini|openai|zai
LLM_PROVIDER=anthropic
LLM_REQUIRED=false

# Claude Sonnet 4.5 (Anthropic) - Recommended
ANTHROPIC_API_KEY=YOUR_ANTHROPIC_API_KEY_HERE
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# Gemini (Google)
GEMINI_API_KEY=YOUR_GEMINI_API_KEY_HERE
GEMINI_MODEL=gemini-3-flash-preview

# OpenAI (Optional)
# OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
# OPENAI_MODEL=gpt-4

# Z.ai GLM-4.7 (Optional)
# ZAI_API_KEY=YOUR_ZAI_API_KEY_HERE
# ZAI_MODEL=glm-4.7

# Fallback providers (comma-separated)
LLM_FALLBACKS=gemini,openai

# ---- Circuit Breaker ----
BREAKER_WINDOW_SECONDS=300
BREAKER_FAIL_THRESHOLD=5
BREAKER_COOLDOWN_SECONDS=120

# ---- CORS (Frontend) ----
CORS_ORIGINS=http://localhost:8080,http://localhost:5173,http://frontend

# ---- Callback Security (Optional) ----
# CALLBACK_SIGNATURE_SECRET=change-me-in-production

# ---- Alerts (Optional) ----
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ---- GitHub Integration (Optional) ----
# GITHUB_API_BASE=https://api.github.com
# GITHUB_REPO=your-org/your-repo
# GITHUB_TOKEN=ghp_your_token_here

# ---- YouTube Integration (Optional) ----
# YOUTUBE_API_KEY=YOUR_YOUTUBE_API_KEY_HERE

# ---- RAG Configuration ----
# RAG data directory (mounted as volume)
# Data stored in: /data/gdrive_mirror

# ---- Task Lock ----
TASK_LOCK_TTL_SECONDS=900

# ---- DLQ Auto Triage ----
AUTO_REQUEUE_FAILURE_CODES=PROVIDER_TIMEOUT,PROVIDER_UPSTREAM_ERROR,PROVIDER_RATE_LIMIT
AUTO_HOLD_FAILURE_CODES=SCHEMA_PARSE_ERROR,SCHEMA_VALIDATION_ERROR,SCHEMA_REPAIR_FAILED
AUTO_ALARM_FAILURE_CODES=PROVIDER_AUTH_ERROR,PROVIDER_DISABLED

# ---- Alert Dedupe ----
ALERT_DEDUPE_TTL_SECONDS=900

# ---- DLQ Apply Age Window ----
DLQ_APPLY_MAX_AGE_SECONDS=7200

# ========================================
# Quick Start:
# 1. Copy this file: cp .env.example .env
# 2. Set your API keys (at minimum ANTHROPIC_API_KEY or GEMINI_API_KEY)
# 3. Run: docker-compose up -d
# 4. Access:
#    - Frontend: http://localhost:8080
#    - Backend API: http://localhost:8000/docs
#    - RabbitMQ UI: http://localhost:15672 (guest/guest)
#    - Metrics: http://localhost:8000/metrics
# ========================================
