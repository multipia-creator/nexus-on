# Cloudflare 한글 대시보드 - 토큰 발급 화면 가이드

## 📺 화면별 상세 가이드

---

### **화면 1: API 토큰 페이지**

```
┌─────────────────────────────────────────────────────────────────┐
│ Cloudflare                              [내 프로필 ▼] [로그아웃]  │
├─────────────────────────────────────────────────────────────────┤
│  ◄ 뒤로                                                          │
│                                                                  │
│  내 프로필                                                        │
│  ┌──────────────┐                                               │
│  │ 프로필       │                                               │
│  │ 기본 설정    │                                               │
│  │ 인증         │                                               │
│  │ ► API 토큰  │  ← 여기 클릭                                  │
│  │ 세션         │                                               │
│  └──────────────┘                                               │
│                                                                  │
│  API 토큰                                                        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                  │
│  API 토큰을 사용하면 Cloudflare 계정 및 리소스에                 │
│  프로그래밍 방식으로 액세스할 수 있습니다.                        │
│                                                                  │
│  ┌──────────────────────────────────────────────────┐          │
│  │ [+ 토큰 만들기]  [API 키 보기]  [전역 API 키]   │          │
│  └──────────────────────────────────────────────────┘          │
│       ↑                                                          │
│       여기 클릭!                                                 │
│                                                                  │
│  기존 토큰 목록:                                                 │
│  ┌─────────────────────────────────────────────────┐           │
│  │ 토큰 이름        생성일        마지막 사용    [⋮] │           │
│  │ my-old-token    2025-01-15    2026-02-01    [⋮] │ ← 삭제 가능│
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**작업:**
1. 좌측 메뉴에서 **"API 토큰"** 클릭
2. 우측 상단 **"토큰 만들기"** 버튼 클릭
3. (선택) 기존 토큰이 있다면 **"⋮"** → **"삭제"** 클릭

---

### **화면 2: API 토큰 템플릿 선택**

```
┌─────────────────────────────────────────────────────────────────┐
│ API 토큰 만들기                                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  API 토큰 템플릿                                                 │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                  │
│  일반적인 사용 사례에 대해 미리 구성된 템플릿                     │
│                                                                  │
│  ┌──────────────────────────────────────────────────┐          │
│  │ 📝 DNS 영역 편집                                  │          │
│  │    영역 DNS 레코드를 편집합니다                    │          │
│  │    권한: Zone - DNS - Edit                       │          │
│  │                             [템플릿 사용]         │          │
│  └──────────────────────────────────────────────────┘          │
│                                                                  │
│  ┌──────────────────────────────────────────────────┐          │
│  │ ⚙️ Cloudflare Workers 편집  ← 이것 선택!          │          │
│  │    Workers 및 Pages를 배포하고 편집합니다          │          │
│  │    권한: Account - Cloudflare Pages - Edit       │          │
│  │                             [템플릿 사용] ← 클릭  │          │
│  └──────────────────────────────────────────────────┘          │
│                                                                  │
│  ┌──────────────────────────────────────────────────┐          │
│  │ 📊 분석 읽기                                      │          │
│  │    Zone Analytics를 읽습니다                      │          │
│  │    권한: Zone - Analytics - Read                 │          │
│  │                             [템플릿 사용]         │          │
│  └──────────────────────────────────────────────────┘          │
│                                                                  │
│  ┌──────────────────────────────────────────────────┐          │
│  │ 🔧 사용자 지정 토큰                                │          │
│  │    직접 권한을 구성합니다                          │          │
│  │                             [시작하기]            │          │
│  └──────────────────────────────────────────────────┘          │
│                                                                  │
│                                          [취소]                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**작업:**
- **"⚙️ Cloudflare Workers 편집"** 템플릿 찾기
- 우측의 **"템플릿 사용"** 버튼 클릭

---

### **화면 3: 토큰 권한 설정**

```
┌─────────────────────────────────────────────────────────────────┐
│ API 토큰 만들기 - Cloudflare Workers 편집                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  토큰 이름                                                        │
│  ┌────────────────────────────────────────────────┐            │
│  │ Cloudflare Workers 편집                         │            │
│  └────────────────────────────────────────────────┘            │
│                                                                  │
│  권한                                                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                  │
│  계정 권한 (Account Permissions)                                 │
│  ┌─────────────────────────────────────────────────┐           │
│  │ Cloudflare Pages          [편집 ▼]  ← 확인!    │           │
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
│  ┌─────────────────────────────────────────────────┐           │
│  │ + 권한 추가                                      │           │
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
│  계정 리소스 (Account Resources)                                 │
│  ┌─────────────────────────────────────────────────┐           │
│  │ [●] 내 계정 포함 (이메일@example.com)            │           │
│  │ [ ] 특정 계정                                    │           │
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
│  Client IP 주소 필터링 (선택사항)                                │
│  ┌─────────────────────────────────────────────────┐           │
│  │ 이 IP 주소는 토큰 사용                           │           │
│  │ [추가하려면 여기를 클릭]                         │           │
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
│  TTL (Time to Live) - 만료 기간                                  │
│  ┌─────────────────────────────────────────────────┐           │
│  │ 시작: 2026-02-03                                 │           │
│  │ 종료: [날짜 선택 ▼] 또는 영구                    │           │
│  └─────────────────────────────────────────────────┘           │
│                                                                  │
│                            [취소]  [요약으로 계속 →]  ← 클릭     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**중요 확인 사항:**
1. ✅ **Cloudflare Pages** 권한이 **"편집"** (Edit)로 설정됨
2. ✅ **계정 리소스**에서 본인 계정 선택됨
3. (선택) IP 필터링, TTL 설정
4. **"요약으로 계속"** 클릭

---

### **화면 4: 토큰 요약 및 생성**

```
┌─────────────────────────────────────────────────────────────────┐
│ API 토큰 요약                                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  토큰 이름: Cloudflare Workers 편집                               │
│                                                                  │
│  권한 요약:                                                       │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                  │
│  ✅ 계정 권한 (Account Permissions)                              │
│     • Cloudflare Pages - 편집 (Edit)                             │
│                                                                  │
│  ✅ 계정 리소스 (Account Resources)                              │
│     • 이메일@example.com                                         │
│                                                                  │
│  ✅ Client IP 필터링: 없음                                        │
│                                                                  │
│  ✅ TTL: 영구 (또는 선택한 기간)                                  │
│                                                                  │
│  ⚠️ 이 토큰은 생성 후 한 번만 표시됩니다!                         │
│     반드시 안전한 곳에 저장하세요.                                │
│                                                                  │
│                            [← 뒤로]  [토큰 만들기]  ← 클릭       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**작업:**
- 모든 권한 확인
- **"토큰 만들기"** 버튼 클릭

---

### **화면 5: 토큰 생성 완료 (⚠️ 중요!)**

```
┌─────────────────────────────────────────────────────────────────┐
│ API 토큰 생성 성공! 🎉                                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ⚠️ 중요: 이 토큰은 다시 볼 수 없습니다!                          │
│  지금 즉시 복사하여 안전한 곳에 저장하세요.                        │
│                                                                  │
│  생성된 API 토큰:                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  AbCdEf1234567890GhIjKlMnOpQrStUvWxYz_AbCdEf1234567890 │   │
│  │                                                          │   │
│  │                                            [📋 복사] ← 클릭│   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│  다음 명령어로 토큰을 테스트할 수 있습니다:                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ curl "https://api.cloudflare.com/client/v4/user/      │   │
│  │      tokens/verify" \                                   │   │
│  │      -H "Authorization: Bearer <YOUR_TOKEN>"           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│  이 페이지를 닫으면 토큰을 다시 볼 수 없습니다!                   │
│                                                                  │
│                                            [완료]                │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**⚠️ 매우 중요한 작업:**
1. **즉시** **"📋 복사"** 버튼 클릭하여 토큰 복사
2. 비밀번호 관리자 또는 `.env.local` 파일에 저장
3. 토큰을 안전하게 저장했는지 재확인
4. **"완료"** 버튼 클릭

---

## 🔍 **각 필드 설명**

### 토큰 이름 (Token Name)
- 기본값: "Cloudflare Workers 편집"
- 변경 가능: 예) "NEXUS Frontend Deploy"

### 권한 (Permissions)
| 권한 | 설정 | 설명 |
|------|------|------|
| Cloudflare Pages | **편집** (Edit) | Pages 프로젝트 배포 및 관리 |
| Account Settings | 읽기 (Read) | 계정 정보 확인 (선택) |

### 계정 리소스 (Account Resources)
- **내 계정 포함**: 본인이 소유한 모든 계정에 적용
- **특정 계정**: 특정 계정만 선택

### Client IP 필터링
- **사용 안 함**: 모든 IP에서 토큰 사용 가능
- **사용**: 특정 IP에서만 토큰 사용 가능 (보안 강화)

### TTL (Time to Live)
- **영구**: 토큰이 만료되지 않음
- **특정 기간**: 예) 6개월, 1년 후 자동 만료

---

## 📝 **토큰 생성 체크리스트**

```markdown
단계별 확인:

[ ] 1. https://dash.cloudflare.com/profile/api-tokens 접속
[ ] 2. "토큰 만들기" 버튼 찾아서 클릭
[ ] 3. "Cloudflare Workers 편집" 템플릿 선택
[ ] 4. 권한 확인: Cloudflare Pages - 편집 (Edit) ✓
[ ] 5. 계정 리소스: 본인 계정 선택 ✓
[ ] 6. (선택) IP 필터링, TTL 설정
[ ] 7. "요약으로 계속" 클릭
[ ] 8. 권한 요약 확인
[ ] 9. "토큰 만들기" 클릭
[ ] 10. ⚠️ 토큰 즉시 복사! (한 번만 표시됨)
[ ] 11. 안전한 곳에 저장 (비밀번호 관리자 또는 .env.local)
[ ] 12. "완료" 클릭
```

---

## 🧪 **토큰 테스트 명령어**

### 자동 테스트
```bash
export CLOUDFLARE_API_TOKEN="복사한-토큰-붙여넣기"
cd /home/user/webapp
./test-cloudflare-token.sh
```

### 수동 테스트
```bash
# 1. 환경 변수 설정
export CLOUDFLARE_API_TOKEN="복사한-토큰-붙여넣기"

# 2. Wrangler 인증 확인
wrangler whoami

# 예상 출력:
# Getting User settings...
# 👋 You are logged in with an API Token, associated with the email '이메일@example.com'!
```

---

**문서 위치**: `/home/user/webapp/docs/CLOUDFLARE_TOKEN_SCREENS_GUIDE.md`  
**생성일**: 2026-02-03  
**프로젝트**: NEXUS v2
