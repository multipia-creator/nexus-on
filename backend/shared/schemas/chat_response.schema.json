{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ChatResponse",
  "type": "object",
  "required": [
    "text",
    "mode",
    "presence_packet"
  ],
  "properties": {
    "text": {
      "type": "string"
    },
    "mode": {
      "type": "string",
      "enum": [
        "friendly",
        "focused",
        "sexy",
        "jealous",
        "busy",
        "play"
      ]
    },
    "presence_packet": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Live2DPresencePacket",
      "type": "object",
      "required": [
        "version",
        "state",
        "timing",
        "gaze",
        "breath",
        "blink",
        "params"
      ],
      "properties": {
        "version": {
          "type": "string"
        },
        "state": {
          "type": "object",
          "required": [
            "mode",
            "intimacy",
            "jealousy_level",
            "sexy_level",
            "task_busy"
          ],
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "friendly",
                "focused",
                "sexy",
                "jealous",
                "busy"
              ]
            },
            "intimacy": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "jealousy_level": {
              "type": "integer",
              "minimum": 0,
              "maximum": 4
            },
            "sexy_level": {
              "type": "integer",
              "minimum": 0,
              "maximum": 3
            },
            "task_busy": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "timing": {
          "type": "object",
          "required": [
            "listening_tick_ms",
            "think_pause_ms",
            "silence_frame_ms"
          ],
          "properties": {
            "listening_tick_ms": {
              "type": "integer",
              "minimum": 150,
              "maximum": 350
            },
            "think_pause_ms": {
              "type": "integer",
              "minimum": 0,
              "maximum": 900
            },
            "silence_frame_ms": {
              "type": "integer",
              "enum": [
                0,
                500
              ]
            }
          },
          "additionalProperties": false
        },
        "gaze": {
          "type": "object",
          "required": [
            "target",
            "lpf_tau"
          ],
          "properties": {
            "target": {
              "type": "string",
              "enum": [
                "user",
                "screen",
                "down_left",
                "down_right",
                "center"
              ]
            },
            "lpf_tau": {
              "type": "number",
              "minimum": 0.08,
              "maximum": 0.15
            }
          },
          "additionalProperties": false
        },
        "breath": {
          "type": "object",
          "required": [
            "rate_hz",
            "amplitude",
            "lpf_tau"
          ],
          "properties": {
            "rate_hz": {
              "type": "number",
              "minimum": 0.12,
              "maximum": 0.35
            },
            "amplitude": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "lpf_tau": {
              "type": "number",
              "minimum": 0.3,
              "maximum": 0.6
            }
          },
          "additionalProperties": false
        },
        "blink": {
          "type": "object",
          "required": [
            "mean_interval_s",
            "cluster_allowed"
          ],
          "properties": {
            "mean_interval_s": {
              "type": "number",
              "minimum": 2.0,
              "maximum": 8.0
            },
            "cluster_allowed": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "params": {
          "type": "object",
          "required": [
            "AngleX",
            "AngleY",
            "AngleZ",
            "EyeLOpen",
            "EyeROpen",
            "EyeBallX",
            "EyeBallY",
            "MouthOpenY",
            "MouthForm",
            "Smile",
            "Breath",
            "Idle",
            "Blush",
            "Tension",
            "BrowLY",
            "BrowRY",
            "Cheek",
            "HeadNod",
            "BodyLean",
            "HandPose"
          ],
          "properties": {
            "AngleX": {
              "type": "number"
            },
            "AngleY": {
              "type": "number"
            },
            "AngleZ": {
              "type": "number"
            },
            "EyeLOpen": {
              "type": "number"
            },
            "EyeROpen": {
              "type": "number"
            },
            "EyeBallX": {
              "type": "number"
            },
            "EyeBallY": {
              "type": "number"
            },
            "MouthOpenY": {
              "type": "number"
            },
            "MouthForm": {
              "type": "number"
            },
            "Smile": {
              "type": "number"
            },
            "Breath": {
              "type": "number"
            },
            "Idle": {
              "type": "number"
            },
            "Blush": {
              "type": "number"
            },
            "Tension": {
              "type": "number"
            },
            "BrowLY": {
              "type": "number"
            },
            "BrowRY": {
              "type": "number"
            },
            "Cheek": {
              "type": "number"
            },
            "HeadNod": {
              "type": "number"
            },
            "BodyLean": {
              "type": "number"
            },
            "HandPose": {
              "type": "number"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "confirm_card": {
      "type": "object",
      "required": [
        "title",
        "summary",
        "action",
        "requires_user_confirm"
      ],
      "properties": {
        "title": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "action": {
          "type": "string"
        },
        "requires_user_confirm": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "warnings": {
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  },
  "additionalProperties": false
}